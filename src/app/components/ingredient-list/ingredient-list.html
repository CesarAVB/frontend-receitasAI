<div class="ingredient-section">
  <h2>Adicionar Ingredientes</h2>
  <button class="btn-add" (click)="openModal()">Adicionar</button>
  <div class="ingredients-list">
    @for (ingredient of ingredients(); track ingredient.id) {
    <div class="ingredient-item">
      <span class="icon">{{ getIngredientIcon(ingredient.nome) }}</span>
      <div class="ingredient-info">
        <span class="name">{{ ingredient.nome }}</span>
        @if (ingredient.quantidade) {
        <span class="quantity">{{ ingredient.quantidade }}</span>
        }
      </div>
      <button class="btn-remove" (click)="removeIngredient(ingredient.id ?? '')" title="Remover">
        âœ•
      </button>
    </div>
    }
  </div>
  <button class="btn-generate" (click)="onGenerateRecipe()" [disabled]="isLoading()">
    @if (isLoading()) {
    <span class="spinner"></span> Gerando... } @else { ðŸš€ Gerar Receita }
  </button>

  <!-- Overlay de carregamento quando estiver gerando a receita -->
  @if (isLoading()) {
  <div class="loading-overlay">
    <div class="spinner-container">
      <div class="spinner-large"></div>
      <p>Gerando uma receita deliciosa...</p>
    </div>
  </div>
  } @if (showModal()) {
  <app-add-ingredient-modal (close)="closeModal()" (add)="addIngredient($event)">
  </app-add-ingredient-modal>
  }
</div>
